# 12 함수

## 12.1 함수란?

- 일련의 과정을 문으로 구현하고 코드 블록으로 감싸서 하나의 실행단위로 정의한 것
- 함수의 실행을 명시적으로 지정해야함

## 12.2 함수를 사용하는 이유

- 코드의 재사용 관점에서 유용
- 유지보수의 편의성을 높이고 실수를 줄어 코드 신뢰성을 높일 수 있음
- 함수 이름을 역할을 잘 설명하게 지정하면 내부코드를 이해할 수 있는 역할을 해 코드 가독성 향상

## 12.3 함수 리터럴

```
var f = fuction add(x,y) {
  return x+y;
};
```

- 함수 리터럴도 평가되어 값을 생성하는 것
- 함수는 객체
- 일반 객체는 호출할 수 없지만 함수는 호출 가능
- 함수 객체만의 고유 프로퍼티를 갖음

## 12.4 함수 정의

### 12.4.1 함수 선언문

```
function add(x,y) {
  return x+y;
}
```

- 함수 선언문은 함수 이름 생략 불가
- 함수 선언문은 표현식이 아님
- 자바스크립트 엔진은 생성된 함수를 호출하기 위해 함수 이름과 동일한 이름의 식별자를 암묵적으로 생성, 함수 객체를 할당
- 함수는 함수 이름으로 호출하는 것이 아니라 함수 객체를 가리키는 식별자로 호출

### 12.4.2 함수 표현식

```
var add = function (x,y) {
  return x + y;
};
```

- 일급 객체 : 값의 성질을 가지고 있는 객체
- 자바스크립트 함수는 일급 객체

### 12.4.3 함수 생성 시점과 함수 호이스팅

- 함수 선언문도 코드가 한 줄씩 순차적으로 실행되는 런타임 이전에 자바 스크립트 엔진에 의해 먼저 실행
- 함수를 정의하면 런타임 이전에 함수 객체 먼저 생성
- 호이스팅 : 함수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유 특징
- var 키워드 변수는 undefined로 초기화, 함수 선언문을 통해 생성된 식별자는 함수 객체로 초기화
- 함수 선언문으로 정의한 함수를 함수 선언 이전에 호출시 호출 가능
- 함수 표현식으로 함수를 정희시 함수 호이스팅이 발생하는 것이 아니라 변수 호이스팅이 발생

### 12.4.4 Function 생성자 함수

- new 연산자와 함께 호출시 함수 객체를 생성 반환, new 연산자 없이 호출해도 결과 동일

### 12.4.5 화살표 함수

```
const add = (x,y) => x+y;
```

- 기존 함수 선언문 또는 함수 표현식의 표현과 내부 동작을 간략화
- 화살표함수 this 바인딩 방식이 다름
- prototype 프로퍼티가 없으며 arguments 객체 생성x

## 12.5 함수 호출

### 12.5.1 매개변수와 인수

- 매개변수는 함수를 정의할 때 선언, 함수 몸체 내부에서 변수와 동일하게 취급
- 일반 변수와 마찬가지로 undefined로 초기화 후 인수 순서대로 할당
- 함수 몸체 내부에서만 참조 가능하고 외부에서는 참조x
- 매개변수의 스코프는 함수 내부
- 매개변수의 개수와 인수의 개수 일치를 체크하지 않음

```
function add(x,y){
  return x+y;
}
console.log(add(2)); // 2+undefined로 NaN
```

### 12.5.2 인수 확인

1. 자바스크립트 함수는 매개변수와 인수의 개수 일치 확인 x
2. 자바스크립트 동적 타입 언어, 매개변수의 타입을 사전에 지정x

- 함수 정의시 적절한 인수가 전달 되었는지 확인

```
function add(x,y) {
  if (typeof x !== 'number' || typeof y !== 'number'){
    throw new TypeError('인수는 모두 숫자 여야한다')
  }
  return x + y;
}
```

### 12.5.3 매개변수의 최대 개수

- 제한되어 있지 않음
- 매개변수의 개수나 순서가 변경되면 함수 호출 방법도 변경되어 유지보수성이 저하
- 매개변수는 적으면 적을 수록 좋음
- 이상적인 함수는 한 사지 일만 해야 하며 가급적 작아야함

### 12.5.4 반환문

- return 키워드와 표현식으로 이뤄진 반환문을 사용해 실행 결과를 함수 외부로 반환
- 함수 호출은 표현식
- 반환문 생략시 undefined를 반환

## 12.6 참조에 의한 전달과 외부 상태 변경

- 원시 값은 값에 의한 전달 방식
- 객체는 참조에 의한 전달 방식
- 매개변수도 함수 내부에 변수이므로 타입에 따라 값, 참조 전달 방식을 따름
- 객체의 변경을 추적하기 위해 옵저버 패턴 등을 통해 객체 참조를 공유하는 모든 이들에게 변경 사실을 통지하는 방법이 있음
- 함수형 프로그램 : 외부 상태를 변경하지 않고 외부 상태에 의존하지 않는 순수 함수를 통해 부수 효과를 억제하고 오류를 피하는 프로그래밍 패러다임

## 12.7 다양한 함수의 형태

### 12.7.1 즉시 실행 함수

- 즉시 실행 함수 : 함수 정의와 동시에 즉시 호출되는 함수, 다시 호출 불가
- 즉시 실행 함수 내에 코드를 모아 두면 변수나 함수 이름 충돌 방지 가능

```
(function () {
  var a = 3;
  var b = 5;
  return a*b;
}());
```

### 12.7.2 재귀함수

- 재귀함수 : 함수가 자기 자신을 호출하는 것
- 재귀 호출을 멈추는 탈출 조건이 반드시 필요

### 12.7.3 중첩 함수

- 중첩함수 : 함수 내부에 정의된 함수

### 12.7.4 콜백 함수

- 콜백함수 : 함수의 매개변수를 통해 다른 함수의 내부로 전달되는 함수
- 고차함수 : 매개변수를 통해 함수의 외부에서 콜백 함수를 전달받은 함수

### 12.7.5 순수 함수와 비순수 함수

- 순수함수 : 외부 상태에 의존하지 않고 변경하지 않는 함수
- 비순수함수: 외부 상태에 의존하거나 회부 상태 변경 함수
